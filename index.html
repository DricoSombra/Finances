<html lang="pt-BR"><head><script>(function(firebaseConfig, initialAuthToken, appId) {
        window.__firebase_config = firebaseConfig;
        window.__initial_auth_token = initialAuthToken;
        window.__app_id = appId;
            })("\n{\n  \"apiKey\": \"AIzaSyCqyCcs2R2e7AegGjvFAwG98wlamtbHvZY\",\n  \"authDomain\": \"bard-frontend.firebaseapp.com\",\n  \"projectId\": \"bard-frontend\",\n  \"storageBucket\": \"bard-frontend.firebasestorage.app\",\n  \"messagingSenderId\": \"175205271074\",\n  \"appId\": \"1:175205271074:web:2b7bd4d34d33bf38e6ec7b\"\n}\n","eyJhbGciOiJSUzI1NiIsImtpZCI6ImVkMTFlZDM5MmY5YzMwZjkyMGE1OGIzYmQ1NGUyZTI3MjIxZTkwMjQiLCJ0eXAiOiJKV1QifQ.eyJzdWIiOiJmaXJlYmFzZS1hZG1pbnNkay1mYnN2Y0BiYXJkLWZyb250ZW5kLmlhbS5nc2VydmljZWFjY291bnQuY29tIiwiYXVkIjoiaHR0cHM6Ly9pZGVudGl0eXRvb2xraXQuZ29vZ2xlYXBpcy5jb20vZ29vZ2xlLmlkZW50aXR5LmlkZW50aXR5dG9vbGtpdC52MS5JZGVudGl0eVRvb2xraXQiLCJ1aWQiOiIwNzc3NDEyNzAzNjYwMDU3MjIxMCIsImlzcyI6ImZpcmViYXNlLWFkbWluc2RrLWZic3ZjQGJhcmQtZnJvbnRlbmQuaWFtLmdzZXJ2aWNlYWNjb3VudC5jb20iLCJjbGFpbXMiOnsiYXBwSWQiOiJjX2RiMzg2MzBiYzE3OTA0NWFfaW5kZXguaHRtbC05MjQifSwiZXhwIjoxNzY3ODQ2ODgzLCJpYXQiOjE3Njc4NDMyODMsImFsZyI6IlJTMjU2In0.GjhdSV8ynNvrEeWyDAuU8XdQ8kOZSSnEfv9nv06A0NSnfjKWg208Hi5zsLnEejvvEPNNx6EZ65SXVT6twe9BOmIxtaCL-7fXjGnJe--trxBgGW7XRK4CTArPVwiwKcc7zLI0lFX9H5DvviQylTZPvCyw7a4linhIVw7s8gbkf8qkxmcuqNIR_yIterStmP3GipL6ANdapulBYnVZRiJPG98JTWT6-CATb2PIzNII8pj0B6Gj-ZWHOc8ggdCwnH66Z5TCOBYzlgJc31tXzpY5sAiKmTGcAvqmLMSU9e6susLQKg_u5p9W0SPX7L2TRwLMbPuTBbLbrCT_CcVEfBrTSw","c_db38630bc179045a_index.html-924")</script><script>'use strict';var h=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,b,d){if(a==Array.prototype||a==Object.prototype)return a;a[b]=d.value;return a};function l(a){a=["object"==typeof globalThis&&globalThis,a,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var b=0;b<a.length;++b){var d=a[b];if(d&&d.Math==Math)return d}throw Error("Cannot find global object");}var n=l(this);
function p(a,b){if(b)a:{var d=n;a=a.split(".");for(var c=0;c<a.length-1;c++){var e=a[c];if(!(e in d))break a;d=d[e]}a=a[a.length-1];c=d[a];b=b(c);b!=c&&b!=null&&h(d,a,{configurable:!0,writable:!0,value:b})}}function r(a){function b(c){return a.next(c)}function d(c){return a.throw(c)}return new Promise(function(c,e){function f(g){g.done?c(g.value):Promise.resolve(g.value).then(b,d).then(f,e)}f(a.next())})}function t(a){return r(a())}
p("Object.values",function(a){return a?a:function(b){var d=[],c;for(c in b)Object.prototype.hasOwnProperty.call(b,c)&&d.push(b[c]);return d}});p("Array.prototype.includes",function(a){return a?a:function(b,d){var c=this;c instanceof String&&(c=String(c));var e=c.length;d=d||0;for(d<0&&(d=Math.max(d+e,0));d<e;d++){var f=c[d];if(f===b||Object.is(f,b))return!0}return!1}});/*

 MIT License

 Copyright (c) 2017-2023 W.Y.

 Permission is hereby granted, free of charge, to any person obtaining a copy
 of this software and associated documentation files (the "Software"), to deal
 in the Software without restriction, including without limitation the rights
 to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 copies of the Software, and to permit persons to whom the Software is
 furnished to do so, subject to the following conditions:

 The above copyright notice and this permission notice shall be included in
 all copies or substantial portions of the Software.

 THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 SOFTWARE.

*/
function u(a,b){const d=a.style;b.backgroundColor&&(d.backgroundColor=b.backgroundColor);b.width&&(d.width=`${b.width}px`);b.height&&(d.height=`${b.height}px`);const c=b.style;c!=null&&Object.keys(c).forEach(e=>{d[e]=c[e]})};var v=(()=>{let a=0;return()=>{a+=1;return`u${`0000${(Math.random()*1679616<<0).toString(36)}`.slice(-4)}${a}`}})();function w(a){const b=[];for(let d=0,c=a.length;d<c;d++)b.push(a[d]);return b}let x=null;function y(a={}){return x?x:a.l?x=a.l:x=w(window.getComputedStyle(document.documentElement))}function z(a,b){return(a=(a.ownerDocument.defaultView||window).getComputedStyle(a).getPropertyValue(b))?parseFloat(a.replace("px","")):0}
function A(a,b={}){var d;if(!(d=b.width)){d=z(a,"border-left-width");var c=z(a,"border-right-width");d=a.clientWidth+d+c}(b=b.height)||(b=z(a,"border-top-width"),c=z(a,"border-bottom-width"),b=a.clientHeight+b+c);return{width:d,height:b}}function B(a){return new Promise((b,d)=>{const c=new Image;c.onload=()=>{c.decode().then(()=>{requestAnimationFrame(()=>b(c))})};c.onerror=d;c.crossOrigin="anonymous";c.decoding="async";c.src=a})}
function C(a){return t(function*(){return Promise.resolve().then(()=>(new XMLSerializer).serializeToString(a)).then(encodeURIComponent).then(b=>`data:image/svg+xml;charset=utf-8,${b}`)})}
function D(a,b,d){return t(function*(){const c=document.createElementNS("http://www.w3.org/2000/svg","svg"),e=document.createElementNS("http://www.w3.org/2000/svg","foreignObject");c.setAttribute("width",`${b}`);c.setAttribute("height",`${d}`);c.setAttribute("viewBox",`0 0 ${b} ${d}`);e.setAttribute("width","100%");e.setAttribute("height","100%");e.setAttribute("x","0");e.setAttribute("y","0");e.setAttribute("externalResourcesRequired","true");c.appendChild(e);e.appendChild(a);return C(c)})}
var E=(a,b)=>{if(a instanceof b)return!0;a=Object.getPrototypeOf(a);return a===null?!1:a.constructor.name===b.name||E(a,b)};function F(a,b){return y(b).map(d=>{const c=a.getPropertyValue(d),e=a.getPropertyPriority(d);return`${d}: ${c}${e?" !important":""};`}).join(" ")}
function G(a,b,d,c){a=window.getComputedStyle(a,d);var e=a.getPropertyValue("content");if(e!==""&&e!=="none"){var f=v();try{b.className=`${b.className} ${f}`}catch(k){return}e=document.createElement("style");var g=e.appendChild;d=`.${f}:${d}`;a.cssText?(c=a.getPropertyValue("content"),c=`${a.cssText} content: '${c.replace(/'|"/g,"")}';`):c=F(a,c);g.call(e,document.createTextNode(`${d}{${c}}`));b.appendChild(e)}};function H(a){return a.search(/^(data:)/)!==-1}function I(a,b,d){return t(function*(){const c=yield fetch(a,b);if(c.status===404)throw Error(`Resource "${c.url}" not found`);const e=yield c.blob();return new Promise((f,g)=>{const k=new FileReader;k.onerror=g;k.onloadend=()=>{try{f(d({o:c,result:k.result}))}catch(m){g(m)}};k.readAsDataURL(e)})})}const J={};function K(a,b,d){let c=a.replace(/\?.*/,"");d&&(c=a);/ttf|otf|eot|woff2?/i.test(c)&&(c=c.replace(/.*\//,""));return b?`[${b}]${c}`:c}
function L(a,b,d){return t(function*(){const c=K(a,b,d.C);if(J[c]!=null)return J[c];d.u&&(a+=(/\?/.test(a)?"&":"?")+(new Date).getTime());let e;try{const f=yield I(a,d.i,({o:g,result:k})=>{b||(b=g.headers.get("Content-Type")||"");return k.split(/,/)[1]});e=`data:${b};base64,${f}`}catch(f){e=d.B||""}return J[c]=e})};const M={P:"application/font-woff",R:"application/font-woff",N:"application/font-truetype",v:"application/vnd.ms-fontobject",H:"image/png",F:"image/jpeg",D:"image/jpeg",A:"image/gif",M:"image/tiff",L:"image/svg+xml",O:"image/webp"};function N(a){return(a=/\.([^./]*?)$/g.exec(a))?a[1]:""};function O(a){return t(function*(){const b=a.toDataURL();return b==="data:,"?a.cloneNode(!1):B(b)})}function aa(a,b){return t(function*(){if(a.currentSrc){var d=document.createElement("canvas");const c=d.getContext("2d");d.width=a.clientWidth;d.height=a.clientHeight;c==null||c.drawImage(a,0,0,d.width,d.height);d=d.toDataURL();return B(d)}d=a.poster;d=yield L(d,M[N(d).toLowerCase()]||"",b);return B(d)})}
function ba(a,b){return t(function*(){try{let d;if(a==null?0:(d=a.contentDocument)==null?0:d.body)return yield P(a.contentDocument.body,b,!0)}catch(d){}return a.cloneNode(!1)})}function ca(a,b){return t(function*(){return E(a,HTMLCanvasElement)?O(a):E(a,HTMLVideoElement)?aa(a,b):E(a,HTMLIFrameElement)?ba(a,b):a.cloneNode(a.tagName!=null&&a.tagName.toUpperCase()==="SVG")})}
function da(a,b,d){return t(function*(){if(b.tagName!=null&&b.tagName.toUpperCase()==="SVG")return b;let c=[];if(a.tagName!=null&&a.tagName.toUpperCase()==="SLOT"&&a.assignedNodes)c=w(a.assignedNodes());else{let e;if(E(a,HTMLIFrameElement)&&((e=a.contentDocument)==null?0:e.body))c=w(a.contentDocument.body.childNodes);else{let f;c=w(((f=a.shadowRoot)!=null?f:a).childNodes)}}if(c.length===0||E(a,HTMLVideoElement))return b;yield c.reduce((e,f)=>e.then(()=>P(f,d)).then(g=>{g&&b.appendChild(g)}),Promise.resolve());
return b})}function ea(a,b,d){const c=b.style;if(c){var e=window.getComputedStyle(a);e.cssText?(c.cssText=e.cssText,c.transformOrigin=e.transformOrigin):y(d).forEach(f=>{let g=e.getPropertyValue(f);f==="font-size"&&g.endsWith("px")&&(g=`${Math.floor(parseFloat(g.substring(0,g.length-2)))-.1}px`);E(a,HTMLIFrameElement)&&f==="display"&&g==="inline"&&(g="block");f==="d"&&b.getAttribute("d")&&(g=`path(${b.getAttribute("d")})`);c.setProperty(f,g,e.getPropertyPriority(f))})}}
function fa(a,b){E(a,HTMLSelectElement)&&(b=Array.from(b.children).find(d=>a.value===d.getAttribute("value")))&&b.setAttribute("selected","")}
function ha(a,b){return t(function*(){var d=a.querySelectorAll?a.querySelectorAll("use"):[];if(d.length===0)return a;var c={};for(var e=0;e<d.length;e++){var f=d[e].getAttribute("xlink:href");if(f){const g=document.querySelector(f);a.querySelector(f)||!g||c[f]||(c[f]=yield P(g,b,!0))}}d=Object.values(c);if(d.length){c=document.createElementNS("http://www.w3.org/1999/xhtml","svg");c.setAttribute("xmlns","http://www.w3.org/1999/xhtml");c.style.position="absolute";c.style.width="0";c.style.height="0";
c.style.overflow="hidden";c.style.display="none";e=document.createElementNS("http://www.w3.org/1999/xhtml","defs");c.appendChild(e);for(f=0;f<d.length;f++)e.appendChild(d[f]);a.appendChild(c)}return a})}
function P(a,b,d){return t(function*(){return d||!b.filter||b.filter(a)?Promise.resolve(a).then(c=>ca(c,b)).then(c=>da(a,c,b)).then(c=>{E(c,Element)&&(ea(a,c,b),G(a,c,":before",b),G(a,c,":after",b),E(a,HTMLTextAreaElement)&&(c.textContent=a.value),E(a,HTMLInputElement)&&c.setAttribute("value",a.value),fa(a,c));return c}).then(c=>ha(c,b)):null})};const Q=/url\((['"]?)([^'"]+?)\1\)/g,ia=/url\([^)]+\)\s*format\((["']?)([^"']+)\1\)/g,ja=/src:\s*(?:url\([^)]+\)\s*format\([^)]+\)[,;]\s*)+/g;function ka(a){const b=[];a.replace(Q,(d,c,e)=>{b.push(e);return d});return b.filter(d=>!H(d))}
function la(a,b,d,c){return t(function*(){try{const e=d?(new URL(b,d||void 0)).toString():b;let f;f=yield L(e,M[N(b).toLowerCase()]||"",c);return a.replace(new RegExp(`(url\\(['"]?)(${b.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1")})(['"]?\\))`,"g"),`$1${f}$3`)}catch(e){}return a})}function ma(a,{I:b}){return b?a.replace(ja,d=>{for(;;){const [c,,e]=ia.exec(d)||[],f=c,g=e;if(!g)return"";if(g===b)return`src: ${f};`}}):a}
function R(a,b,d){return t(function*(){if(a.search(Q)===-1)return a;const c=ma(a,d);return ka(c).reduce((e,f)=>e.then(g=>la(g,f,b,d)),Promise.resolve(c))})};function S(a,b,d){return t(function*(){var c;const e=(c=b.style)==null?void 0:c.getPropertyValue(a);return e?(c=yield R(e,null,d),b.style.setProperty(a,c,b.style.getPropertyPriority(a)),!0):!1})}function na(a,b){return t(function*(){(yield S("background",a,b))||(yield S("background-image",a,b));(yield S("mask",a,b))||(yield S("-webkit-mask",a,b))||(yield S("mask-image",a,b))||(yield S("-webkit-mask-image",a,b))})}
function oa(a,b){return t(function*(){const d=E(a,HTMLImageElement);if(d&&!H(a.src)||E(a,SVGImageElement)&&!H(a.href.baseVal)){var c=d?a.src:a.href.baseVal,e=yield L(c,M[N(c).toLowerCase()]||"",b);yield new Promise((f,g)=>{a.onload=f;a.onerror=b.m?(...k)=>{try{f(b.m(...k))}catch(m){g(m)}}:g;a.decode&&(a.decode=f);a.loading==="lazy"&&(a.loading="eager");d?(a.srcset="",a.src=e):a.href.baseVal=e})}})}
function pa(a,b){return t(function*(){const d=w(a.childNodes).map(c=>T(c,b));yield Promise.all(d).then(()=>a)})}function T(a,b){return t(function*(){E(a,Element)&&(yield na(a,b),yield oa(a,b),yield pa(a,b))})};const U={};function V(a){return t(function*(){var b=U[a];if(b!=null)return b;b=yield(yield fetch(a)).text();b={url:a,cssText:b};return U[a]=b})}function W(a,b){return t(function*(){let d=a.cssText;const c=/url\(["']?([^"')]+)["']?\)/g,e=(d.match(/url\([^)]+\)/g)||[]).map(f=>t(function*(){let g=f.replace(c,"$1");g.startsWith("https://")||(g=(new URL(g,a.url)).href);return I(g,b.i,({result:k})=>{d=d.replace(f,`url(${k})`);return[f,k]})}));return Promise.all(e).then(()=>d)})}
function X(a){if(a==null)return[];const b=[];a=a.replace(/(\/\*[\s\S]*?\*\/)/gi,"");for(var d=RegExp("((@.*?keyframes [\\s\\S]*?){([\\s\\S]*?}\\s*?)})","gi");;){var c=d.exec(a);if(c===null)break;b.push(c[0])}a=a.replace(d,"");d=/@import[\s\S]*?url\([^)]*\)[\s\S]*?;/gi;for(c=RegExp("((\\s*?(?:\\/\\*[\\s\\S]*?\\*\\/)?\\s*?@media[\\s\\S]*?){([\\s\\S]*?)}\\s*?})|(([\\s\\S]*?){([\\s\\S]*?)})","gi");;){let e=d.exec(a);if(e===null)if(e=c.exec(a),e===null)break;else d.lastIndex=c.lastIndex;else c.lastIndex=
d.lastIndex;b.push(e[0])}return b}
function qa(a,b){return t(function*(){const d=[],c=[];a.forEach(e=>{if("cssRules"in e)try{w(e.cssRules||[]).forEach((f,g)=>{if(f.type===CSSRule.IMPORT_RULE){let k=g+1;f=V(f.href).then(m=>W(m,b)).then(m=>X(m).forEach(q=>{try{e.insertRule(q,q.startsWith("@import")?k+=1:e.cssRules.length)}catch(Da){}})).catch(()=>{});c.push(f)}})}catch(f){const g=a.find(k=>k.href==null)||document.styleSheets[0];e.href!=null&&c.push(V(e.href).then(k=>W(k,b)).then(k=>X(k).forEach(m=>{g.insertRule(m,g.cssRules.length)})).catch(()=>
{}))}});return Promise.all(c).then(()=>{a.forEach(e=>{if("cssRules"in e)try{w(e.cssRules||[]).forEach(f=>{d.push(f)})}catch(f){}});return d})})}function ra(a){return a.filter(b=>b.type===CSSRule.FONT_FACE_RULE).filter(b=>b.style.getPropertyValue("src").search(Q)!==-1)}function sa(a,b){return t(function*(){if(a.ownerDocument==null)throw Error("Provided element is not within a Document");var d=w(a.ownerDocument.styleSheets);d=yield qa(d,b);return ra(d)})}
function ta(a){function b(c){(c.style.fontFamily||getComputedStyle(c).fontFamily).split(",").forEach(e=>{d.add(e.trim().replace(/["']/g,""))});Array.from(c.children).forEach(e=>{e instanceof HTMLElement&&b(e)})}const d=new Set;b(a);return d}function ua(a,b){return t(function*(){const d=yield sa(a,b),c=ta(a);return(yield Promise.all(d.filter(e=>c.has(e.style.fontFamily.trim().replace(/["']/g,""))).map(e=>R(e.cssText,e.parentStyleSheet?e.parentStyleSheet.href:null,b)))).join("\n")})}
function va(a,b){return t(function*(){const d=b.j!=null?b.j:b.K?null:yield ua(a,b);if(d){const c=document.createElement("style");c.appendChild(document.createTextNode(d));a.firstChild?a.insertBefore(c,a.firstChild):a.appendChild(c)}})};function wa(a,b={}){return t(function*(){const {width:d,height:c}=A(a,b),e=yield P(a,b,!0);yield va(e,b);yield T(e,b);u(e,b);return yield D(e,d,c)})}
function xa(a,b={}){return t(function*(){const {width:d,height:c}=A(a,b);var e=yield wa(a,b);e=yield B(e);const f=document.createElement("canvas"),g=f.getContext("2d"),k=b.G||window.devicePixelRatio||1,m=b.h||d,q=b.g||c;f.width=m*k;f.height=q*k;!b.J&&(f.width>16384||f.height>16384)&&(f.width>16384&&f.height>16384?f.width>f.height?(f.height*=16384/f.width,f.width=16384):(f.width*=16384/f.height,f.height=16384):f.width>16384?(f.height*=16384/f.width,f.width=16384):(f.width*=16384/f.height,f.height=
16384));f.style.width=`${m}`;f.style.height=`${q}`;b.backgroundColor&&(g.fillStyle=b.backgroundColor,g.fillRect(0,0,f.width,f.height));g.drawImage(e,0,0,f.width,f.height);return f})}function ya(a,b={}){return t(function*(){return(yield xa(a,b)).toDataURL()})};const za=["gemini.google.com","corp.google.com","proxy.googlers.com"];function Y(){return document.body.querySelectorAll('[class*="animate"]').length>0}function Z(a){return t(function*(){try{return yield ya(a,{h:a.offsetWidth,g:a.offsetHeight})}catch(d){var b=a.offsetHeight;const c=document.createElement("canvas");c.width=a.offsetWidth;c.height=b;return c.toDataURL("image/png")}})}
function Aa(){return t(function*(){const a=document.body.offsetWidth,b=document.body.offsetHeight,d=document.body.cloneNode(!0);d.querySelectorAll('[class*="animate"]').forEach(c=>{c.classList.remove(...Array.from(c.classList).filter(e=>e.startsWith("animate")))});d.style.width=`${a}px`;d.style.height=`${b}px`;return d})}
function Ba(a){return t(function*(){let b=document.body;if(Y()){var d=yield Aa();b=d;document.body.appendChild(d)}d=yield Z(b);Y()&&document.body.removeChild(b);window.parent.postMessage({type:"SEND_SCREENSHOT",image:d,topOffset:document.documentElement.scrollTop},a.origin)})}function Ca(a){return t(function*(){const b={type:"SEND_SCREENSHOT_FOR_DATA_VISUALIZATION",image:yield Z(document.body),topOffset:0};window.parent.postMessage(b,a.origin)})}
window.addEventListener("message",a=>t(function*(){if(za.some(d=>a.origin.includes(d))){var b=a.data;b&&(b.type==="MAKE_SCREENSHOT"&&(yield Ba(a)),b.type==="MAKE_SCREENSHOT_FOR_DATA_VISUALIZATION"&&(yield Ca(a)))}}));
</script><script>(function() {
  // Ensure this script is executed only once
  if (window.firebaseAuthBridgeScriptLoaded) {
    return;
  }
  window.firebaseAuthBridgeScriptLoaded = true;

  let nextTokenPromiseId = 0;

  // Stores { resolve, reject } for ongoing token requests
  const pendingTokenPromises = {};

  // Listen for messages from the Host Application
  window.addEventListener('message', function(event) {

    const messageData = event.data;

  if (messageData && messageData.type === 'RESOLVE_NEW_FIREBASE_TOKEN') {
      const { success, token, error, promiseId } = messageData ?? {};
      if (pendingTokenPromises[promiseId]) {
        if (success) {
          pendingTokenPromises[promiseId].resolve(token);
        } else {
          pendingTokenPromises[promiseId].reject(new Error(error || 'Token refresh failed from host.'));
        }
        delete pendingTokenPromises[promiseId];
      }
    }
  });

  // Expose a function for the Generated App to request a new Firebase token
  window.requestNewFirebaseToken = function() {
    const currentPromiseId = nextTokenPromiseId++;
    const promise = new Promise((resolve, reject) => {
      pendingTokenPromises[currentPromiseId] = { resolve, reject };
    });
    if (window.parent && window.parent !== window) {
      window.parent.postMessage({
        type: 'REQUEST_NEW_FIREBASE_TOKEN',
        promiseId: currentPromiseId
      }, '*');
    } else {
      pendingTokenPromises[currentPromiseId].reject(new Error('No parent window to request token from.'));
      delete pendingTokenPromises[currentPromiseId];
    }
    return promise;
  };
})();</script><script>
let realOriginalGetUserMedia = null;
if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {
  realOriginalGetUserMedia = navigator.mediaDevices.getUserMedia.bind(navigator.mediaDevices);
}

(function() {
  if (navigator.mediaDevices && navigator.mediaDevices.__proto__) {
    try {
      Object.defineProperty(navigator.mediaDevices.__proto__, 'getUserMedia', {
        get: function() {
          return undefined; // Or throw an error
        },
        configurable: false
      });
    } catch (error) {
      console.error("Error defining prototype getter:", error);
    }
  }
})();

(function() {
  const pendingMediaResolvers = {};
  let nextMediaPromiseId = 0;

  function requestMediaPermissions(constraints) {
    const mediaPromiseId = nextMediaPromiseId++;
    const promise = new Promise((resolve, reject) => {
      pendingMediaResolvers[mediaPromiseId] = (granted) => {
        delete pendingMediaResolvers[mediaPromiseId];
        resolve(granted);
      };
    });

    window.parent.postMessage({
      type: 'requestMediaPermission',
      constraints: constraints,
      promiseId: mediaPromiseId,
    }, '*');

    return promise;
  }

  let originalGetUserMedia = realOriginalGetUserMedia;

  function interceptGetUserMedia() {
    if (navigator.mediaDevices) {
      Object.defineProperty(navigator.mediaDevices, 'getUserMedia', {
        value: function(constraints) {
          return requestMediaPermissions(constraints).then((granted) => {
            if (granted) {
              if (originalGetUserMedia) {
                return originalGetUserMedia(constraints);
              } else {
                throw new Error("Original getUserMedia not available.");
              }
            } else {
              throw new DOMException('Permission denied', 'NotAllowedError');
            }
          });
        },
        writable: false,
        configurable: false
      });
    }
  }

  interceptGetUserMedia();

  const observer = new MutationObserver(function(mutationsList, observer) {
    for (const mutation of mutationsList) {
      if (mutation.type === 'reconfigured' && mutation.name === 'getUserMedia' && mutation.object === navigator.mediaDevices) {
        interceptGetUserMedia();
      } else if (mutation.type === 'attributes' && mutation.attributeName === 'getUserMedia' && mutation.target === navigator.mediaDevices) {
        interceptGetUserMedia();
      } else if (mutation.type === 'childList' && mutation.addedNodes) {
        mutation.addedNodes.forEach(node => {
          if (node === navigator.mediaDevices) {
            interceptGetUserMedia();
          }
        });
      }
    }
  });

  function interceptSpeechRecognition() {
    if (!window.SpeechRecognition && !window.webkitSpeechRecognition) {
      return;
    }

    const OriginalSpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;

    const SpeechRecognitionWrapper = function(...args) {
      const recognizer = new OriginalSpeechRecognition(...args);
      const originalStart = recognizer.start.bind(recognizer);

      recognizer.start = function() {
        requestMediaPermissions({ audio: true }).then(granted => {
          if (granted) {
            originalStart();
          } else {
            const errorEvent = new SpeechRecognitionErrorEvent('error');
            errorEvent.error = 'not-allowed'; // This is the standard error for permission denial.
            recognizer.dispatchEvent(errorEvent);
          }
        });
      };

      return recognizer;
    };

    SpeechRecognitionWrapper.prototype = OriginalSpeechRecognition.prototype;
    SpeechRecognitionWrapper.prototype.constructor = SpeechRecognitionWrapper;

    if (window.SpeechRecognition) {
      window.SpeechRecognition = SpeechRecognitionWrapper;
    }
    if (window.webkitSpeechRecognition) {
      window.webkitSpeechRecognition = SpeechRecognitionWrapper;
    }
  }

  interceptSpeechRecognition();

  window.addEventListener('message', function(event) {
    if (event.data) {
      if (event.data.type === 'resolveMediaPermission') {
        const { promiseId, granted } = event.data;
        if (pendingMediaResolvers[promiseId]) {
          pendingMediaResolvers[promiseId](granted);
        }
      }
    }
  });

})();</script><script>((function(modelInformation) {
  const originalFetch = window.fetch;
  // TODO: b/421908508 - Move these out of the script and match all generative AI model calls.
  let googleLlmBaseApiUrls = [
    'https://generativelanguage.googleapis.com/v1beta/models/' + modelInformation.textModelName + ':streamGenerateContent',
    'https://generativelanguage.googleapis.com/v1beta/models/' + modelInformation.textModelName + ':generateContent',
    'https://generativelanguage.googleapis.com/v1beta/models/' + modelInformation.imageModelName + ':predict',
    'https://generativelanguage.googleapis.com/v1beta/models/' + modelInformation.imageModelName + ':predictLongRunning',
    'https://generativelanguage.googleapis.com/v1beta/models/' + modelInformation.imageEditModelName + ':generateContent',
    'https://generativelanguage.googleapis.com/v1beta/models/' + modelInformation.imageTransformModelName + ':generateContent',
    'https://generativelanguage.googleapis.com/v1beta/models/' + modelInformation.videoModelName + ':predict',
    'https://generativelanguage.googleapis.com/v1beta/models/' + modelInformation.videoModelName + ':predictLongRunning',
    'https://generativelanguage.googleapis.com/v1beta/models/' + modelInformation.ttsModelName + ':generateContent',
  ];
  modelInformation.deprecatedTextModelNames.forEach((modelName) => {
    googleLlmBaseApiUrls.push(
      'https://generativelanguage.googleapis.com/v1beta/models/' + modelName + ':streamGenerateContent',
      'https://generativelanguage.googleapis.com/v1beta/models/' + modelName + ':generateContent',
    );
  });
  modelInformation.deprecatedImageModelNames.forEach((modelName) => {
    googleLlmBaseApiUrls.push(
      'https://generativelanguage.googleapis.com/v1beta/models/' + modelName + ':predict',
      'https://generativelanguage.googleapis.com/v1beta/models/' + modelName + ':predictLongRunning',
    );
  });

  const pendingFetchResolvers = {};
  let nextPromiseId = 0;

  function handleStringInput(input, optionsArgument) {
    const actualUrl = input;
    const fetchCallArgs = [actualUrl, optionsArgument];
    const effectiveOptions = optionsArgument || {};
    const bodyForApiKeyCheck = effectiveOptions.body;
    const bodyForPostMessage = effectiveOptions.body;
    return { actualUrl, fetchCallArgs, effectiveOptions, bodyForApiKeyCheck, bodyForPostMessage };
  }

  function handleRequestInput(input, optionsArgument) {
    const actualUrl = input.url;
    const fetchCallArgs = [input, optionsArgument];
    const effectiveOptions = { method: input.method, headers: new Headers(input.headers) };
    let bodyForApiKeyCheck;
    let bodyForPostMessage;

    if (optionsArgument) {
      if (optionsArgument.method) effectiveOptions.method = optionsArgument.method;
      if (optionsArgument.headers) effectiveOptions.headers = new Headers(optionsArgument.headers);
      if ('body' in optionsArgument) {
        bodyForApiKeyCheck = optionsArgument.body;
        bodyForPostMessage = optionsArgument.body;
      } else {
        bodyForApiKeyCheck = undefined;
        bodyForPostMessage = input.body;
      }
    } else {
      bodyForApiKeyCheck = undefined;
      bodyForPostMessage = input.body;
    }
    return { actualUrl, fetchCallArgs, effectiveOptions, bodyForApiKeyCheck, bodyForPostMessage };
  }

  window.fetch = function(input, optionsArgument) {
    let actualUrl;
    let fetchCallArgs;
    let effectiveOptions = {};
    let bodyForApiKeyCheck;
    let bodyForPostMessage;

    if (typeof input === 'string') {
      ({actualUrl, fetchCallArgs, effectiveOptions, bodyForApiKeyCheck, bodyForPostMessage} = handleStringInput(input, optionsArgument));
    } else if (input instanceof Request) {
      ({actualUrl, fetchCallArgs, effectiveOptions, bodyForApiKeyCheck, bodyForPostMessage} = handleRequestInput(input, optionsArgument));
    } else {
      return originalFetch.apply(window, [input, optionsArgument]);
    }

    effectiveOptions.method = effectiveOptions.method || 'GET';
    if (!effectiveOptions.headers) {
      effectiveOptions.headers = new Headers();
    }


    if (typeof actualUrl === 'string' && googleLlmBaseApiUrls.some((url) => actualUrl.startsWith(url))) {
      let apiKeyIsNull = true;

      const regex = new RegExp("models/([^:]+)");
      const modelNameMatch = actualUrl.match(regex);
      const modelName = modelNameMatch ? modelNameMatch[1] : 'unspecified';


      try {
        const urlObject = new URL(actualUrl);  // Use URL object for robust parsing
        const apiKeyParam = urlObject.searchParams.get('key');
        if (apiKeyParam) {
          apiKeyIsNull = false;
        }
      } catch (e) {
        // Continue checks even if URL parsing fails
      }

      if (apiKeyIsNull && effectiveOptions.headers) {
        const h = new Headers(effectiveOptions.headers);
        const apiKeyHeaderValue = h.get('X-API-Key') || h.get('x-api-key');
        if (apiKeyHeaderValue) {
          apiKeyIsNull = false;
          return originalFetch.apply(window, fetchCallArgs);
        }
      }

      if (apiKeyIsNull && effectiveOptions.method && ['POST', 'PUT', 'PATCH'].includes(effectiveOptions.method.toUpperCase()) && typeof bodyForApiKeyCheck === 'string') {
        try {
          const bodyData = JSON.parse(bodyForApiKeyCheck);
          if (bodyData && bodyData.apiKey) {
            apiKeyIsNull = false;
            return originalFetch.apply(window, fetchCallArgs);
          }
        } catch (e) {
          // Ignore JSON parsing errors
        }
      }

      if(apiKeyIsNull) {
        const promiseId = nextPromiseId++;
        const promise = new Promise((resolve) => {
          pendingFetchResolvers[promiseId] = (resolvedResponse) => {
            delete pendingFetchResolvers[promiseId];
            resolve(resolvedResponse);
          };
        });

        let serializedBodyForPostMessage;
        if (typeof bodyForPostMessage === 'string' || bodyForPostMessage == null) {
            serializedBodyForPostMessage = bodyForPostMessage;
        } else if (bodyForPostMessage instanceof ReadableStream) {
            serializedBodyForPostMessage = null;
        } else {
            try {
                serializedBodyForPostMessage = JSON.stringify(bodyForPostMessage);
            } catch (e) {
                serializedBodyForPostMessage = null;
            }
        }

        const messageOptions = {
            method: effectiveOptions.method,
            headers: Object.fromEntries(new Headers(effectiveOptions.headers).entries()),
            body: serializedBodyForPostMessage
        };

        window.parent.postMessage({
          type: 'requestFetch',
          url: actualUrl,
          modelName: modelName,
          options: messageOptions,
          promiseId: promiseId,
        }, '*');

        return promise;
      }
      return originalFetch.apply(window, fetchCallArgs);
    }
    return originalFetch.apply(window, fetchCallArgs);
  };

  window.addEventListener('message', function(event) {
    if (event.data && event.data.type === 'resolveFetch') {
      const { promiseId, response } = event.data;
      if (pendingFetchResolvers[promiseId]) {
        try {
          const reconstructedResponse = new Response(response.body, {
            status: response.status,
            statusText: response.statusText,
            headers: new Headers(response.headers),
          });
          pendingFetchResolvers[promiseId](reconstructedResponse);
        } catch (error) {
          pendingFetchResolvers[promiseId](new Response(null, { status: 500, statusText: "Interceptor Response Reconstruction Error" }));
        }
      }
    }
  });

}))({"textModelName":"gemini-2.5-flash-preview-09-2025","imageModelName":"imagen-4.0-generate-001","imageEditModelName":"gemini-2.5-flash-image-preview","imageTransformModelName":"gemini-3-pro-image-preview-11-2025","videoModelName":"veo-2.0-generate-001","ttsModelName":"gemini-2.5-flash-preview-tts","deprecatedTextModelNames":["gemini-2.0-flash","gemini-2.5-flash-preview-04-17","gemini-2.5-flash-preview-05-20"],"deprecatedImageModelNames":["imagen-3.0-generate-001","imagen-3.0-generate-002"]})</script><script>(function() {
  const originalConsoleLog = console.log;
  const originalConsoleError = console.error;

    /**
   * Normalizes an error event or a promise rejection reason into a structured error object.
   * @param {*} errorEventOrReason The error object or reason.
   * @return {object} Structured error data { message, name, stack }.
   */
  function getErrorObject(errorEventOrReason) {
    if (errorEventOrReason instanceof Error) {
      return {
        message: errorEventOrReason.message,
        name: errorEventOrReason.name,
        stack: errorEventOrReason.stack,
      };
    }
    // Fallback for non-Error objects.
    try {
      return {
        message: JSON.stringify(errorEventOrReason),
        name: 'UnknownErrorType',
        stack: null,
      };
    } catch (e) {
      return {
        message: String(errorEventOrReason),
        name: 'UnknownErrorTypeNonStringifiable',
        stack: null,
      };
    }
  }

  /**
   * Converts an array of arguments (from log/error) into a single string.
   * Handles Error objects specially to include their message and stack.
   * @param {Array<*>} args - Arguments passed to console methods.
   * @return {string} A string representation of the arguments.
   */
  function stringifyArgs(args) {
    return args
      .map((arg) => {
        if (arg instanceof Error) {
          const {message, stack} = arg;
          return `Error: ${message}${stack ? ('\nStack: ' + stack) : ''}`;
        }
        if (typeof arg === 'object' && arg !== null) {
          try {
            return JSON.stringify(arg);
          } catch (error) {
            return '[Circular Object]';
          }
        } else {
          return String(arg);
        }
      })
      .join(' ');
  }

  console.log = function(...args) {
    const logString = stringifyArgs(args);
    window.parent.postMessage({ type: 'log', message: logString }, '*');
    originalConsoleLog.apply(console, args);
  };

  console.error = function(...args) {
    let errorData;
    if (args.length > 0 && args[0] instanceof Error) {
      const err = args[0];
      // If the first arg is an Error, capture its details.
      errorData = {
        type: 'error',
        source: 'CONSOLE_ERROR',
        ...getErrorObject(err),
        rawArgsString: stringifyArgs(args.slice(1)),
        timestamp: new Date().toISOString(),
      };
    } else {
      // If not an Error object, treat all args as a general error message.
      errorData = {
        type: 'error',
        source: 'CONSOLE_ERROR',
        message: stringifyArgs(args),
        name: 'ConsoleLoggedError',
        stack: null,
        timestamp: new Date().toISOString(),
      };
    }
    window.parent.postMessage(errorData, '*');
    originalConsoleError.apply(console, args);
  };

  // Listen for global unhandled synchronous errors.
  window.addEventListener('error', function(event) {
    const errorDetails = event.error ? getErrorObject(event.error) : {
      message: event.message,
      name: 'GlobalError',
      stack: null,
      filename: event.filename,
      lineno: event.lineno,
      colno: event.colno,
    };

    window.parent.postMessage({
      type: 'error',
      source: 'global',
      ...errorDetails,
      message: errorDetails.message || event.message,
      timestamp: new Date().toISOString(),
    }, '*');
  });

  // Listen for unhandled promise rejections (asynchronous errors).
  window.addEventListener('unhandledrejection', function(event) {
    const errorDetails = getErrorObject(event.reason);

    window.parent.postMessage({
      type: 'error',
      source: 'unhandledrejection',
      ...errorDetails,
      message: errorDetails.message || 'Unhandled Promise Rejection',
      timestamp: new Date().toISOString(),
    }, '*');
  });

})();</script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Finan√ßas Flex - Profissional</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background-color: #f8fafc; }
        .card { background: white; border-radius: 12px; box-shadow: 0 2px 4px rgba(0,0,0,0.05); border: 1px solid #e2e8f0; }
        .btn-icon { cursor: pointer; transition: transform 0.1s; }
        .btn-icon:active { transform: scale(0.95); }
        .progress-bar { transition: width 1s ease-in-out; }
        .input-ghost { background: transparent; border-bottom: 1px solid transparent; outline: none; transition: border-color 0.2s; }
        .input-ghost:focus { border-color: #cbd5e1; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(5px); } to { opacity: 1; transform: translateY(0); } }
        .animate-fade { animation: fadeIn 0.3s ease-out forwards; }
    </style>
<style>*, ::before, ::after{--tw-border-spacing-x:0;--tw-border-spacing-y:0;--tw-translate-x:0;--tw-translate-y:0;--tw-rotate:0;--tw-skew-x:0;--tw-skew-y:0;--tw-scale-x:1;--tw-scale-y:1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness:proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:rgb(59 130 246 / 0.5);--tw-ring-offset-shadow:0 0 #0000;--tw-ring-shadow:0 0 #0000;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: ;--tw-contain-size: ;--tw-contain-layout: ;--tw-contain-paint: ;--tw-contain-style: }::backdrop{--tw-border-spacing-x:0;--tw-border-spacing-y:0;--tw-translate-x:0;--tw-translate-y:0;--tw-rotate:0;--tw-skew-x:0;--tw-skew-y:0;--tw-scale-x:1;--tw-scale-y:1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness:proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:rgb(59 130 246 / 0.5);--tw-ring-offset-shadow:0 0 #0000;--tw-ring-shadow:0 0 #0000;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: ;--tw-contain-size: ;--tw-contain-layout: ;--tw-contain-paint: ;--tw-contain-style: }/* ! tailwindcss v3.4.17 | MIT License | https://tailwindcss.com */*,::after,::before{box-sizing:border-box;border-width:0;border-style:solid;border-color:#e5e7eb}::after,::before{--tw-content:''}:host,html{line-height:1.5;-webkit-text-size-adjust:100%;-moz-tab-size:4;tab-size:4;font-family:ui-sans-serif, system-ui, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";font-feature-settings:normal;font-variation-settings:normal;-webkit-tap-highlight-color:transparent}body{margin:0;line-height:inherit}hr{height:0;color:inherit;border-top-width:1px}abbr:where([title]){-webkit-text-decoration:underline dotted;text-decoration:underline dotted}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit}a{color:inherit;text-decoration:inherit}b,strong{font-weight:bolder}code,kbd,pre,samp{font-family:ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;font-feature-settings:normal;font-variation-settings:normal;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}table{text-indent:0;border-color:inherit;border-collapse:collapse}button,input,optgroup,select,textarea{font-family:inherit;font-feature-settings:inherit;font-variation-settings:inherit;font-size:100%;font-weight:inherit;line-height:inherit;letter-spacing:inherit;color:inherit;margin:0;padding:0}button,select{text-transform:none}button,input:where([type=button]),input:where([type=reset]),input:where([type=submit]){-webkit-appearance:button;background-color:transparent;background-image:none}:-moz-focusring{outline:auto}:-moz-ui-invalid{box-shadow:none}progress{vertical-align:baseline}::-webkit-inner-spin-button,::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}summary{display:list-item}blockquote,dd,dl,figure,h1,h2,h3,h4,h5,h6,hr,p,pre{margin:0}fieldset{margin:0;padding:0}legend{padding:0}menu,ol,ul{list-style:none;margin:0;padding:0}dialog{padding:0}textarea{resize:vertical}input::placeholder,textarea::placeholder{opacity:1;color:#9ca3af}[role=button],button{cursor:pointer}:disabled{cursor:default}audio,canvas,embed,iframe,img,object,svg,video{display:block;vertical-align:middle}img,video{max-width:100%;height:auto}[hidden]:where(:not([hidden=until-found])){display:none}.fixed{position:fixed}.absolute{position:absolute}.relative{position:relative}.inset-0{inset:0px}.left-2{left:0.5rem}.top-1\/2{top:50%}.z-10{z-index:10}.z-20{z-index:20}.z-50{z-index:50}.col-span-3{grid-column:span 3 / span 3}.mx-auto{margin-left:auto;margin-right:auto}.mb-1{margin-bottom:0.25rem}.mb-1\.5{margin-bottom:0.375rem}.mb-6{margin-bottom:1.5rem}.mr-2{margin-right:0.5rem}.mt-1{margin-top:0.25rem}.mt-2{margin-top:0.5rem}.mt-4{margin-top:1rem}.block{display:block}.flex{display:flex}.grid{display:grid}.hidden{display:none}.h-2{height:0.5rem}.h-32{height:8rem}.h-48{height:12rem}.h-6{height:1.5rem}.h-8{height:2rem}.h-full{height:100%}.h-screen{height:100vh}.w-32{width:8rem}.w-6{width:1.5rem}.w-8{width:2rem}.w-full{width:100%}.w-12{width:3rem}.w-16{width:4rem}.min-w-\[140px\]{min-width:140px}.min-w-\[120px\]{min-width:120px}.max-w-6xl{max-width:72rem}.max-w-lg{max-width:32rem}.flex-1{flex:1 1 0%}.shrink-0{flex-shrink:0}.-translate-y-1\/2{--tw-translate-y:-50%;transform:translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.cursor-pointer{cursor:pointer}.select-none{-webkit-user-select:none;user-select:none}.resize-none{resize:none}.grid-cols-1{grid-template-columns:repeat(1, minmax(0, 1fr))}.grid-cols-3{grid-template-columns:repeat(3, minmax(0, 1fr))}.flex-col{flex-direction:column}.flex-wrap{flex-wrap:wrap}.items-start{align-items:flex-start}.items-center{align-items:center}.justify-center{justify-content:center}.justify-between{justify-content:space-between}.gap-1{gap:0.25rem}.gap-10{gap:2.5rem}.gap-2{gap:0.5rem}.gap-3{gap:0.75rem}.gap-4{gap:1rem}.gap-8{gap:2rem}.gap-1\.5{gap:0.375rem}.gap-x-8{column-gap:2rem}.gap-y-3{row-gap:0.75rem}.space-y-3 > :not([hidden]) ~ :not([hidden]){--tw-space-y-reverse:0;margin-top:calc(0.75rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(0.75rem * var(--tw-space-y-reverse))}.space-y-4 > :not([hidden]) ~ :not([hidden]){--tw-space-y-reverse:0;margin-top:calc(1rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(1rem * var(--tw-space-y-reverse))}.space-y-6 > :not([hidden]) ~ :not([hidden]){--tw-space-y-reverse:0;margin-top:calc(1.5rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(1.5rem * var(--tw-space-y-reverse))}.space-y-1 > :not([hidden]) ~ :not([hidden]){--tw-space-y-reverse:0;margin-top:calc(0.25rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(0.25rem * var(--tw-space-y-reverse))}.overflow-hidden{overflow:hidden}.overflow-y-auto{overflow-y:auto}.rounded{border-radius:0.25rem}.rounded-full{border-radius:9999px}.rounded-lg{border-radius:0.5rem}.rounded-xl{border-radius:0.75rem}.border{border-width:1px}.border-b{border-bottom-width:1px}.border-l-4{border-left-width:4px}.border-t{border-top-width:1px}.border-r{border-right-width:1px}.border-dashed{border-style:dashed}.border-blue-500{--tw-border-opacity:1;border-color:rgb(59 130 246 / var(--tw-border-opacity, 1))}.border-emerald-200{--tw-border-opacity:1;border-color:rgb(167 243 208 / var(--tw-border-opacity, 1))}.border-emerald-500{--tw-border-opacity:1;border-color:rgb(16 185 129 / var(--tw-border-opacity, 1))}.border-rose-200{--tw-border-opacity:1;border-color:rgb(254 205 211 / var(--tw-border-opacity, 1))}.border-rose-500{--tw-border-opacity:1;border-color:rgb(244 63 94 / var(--tw-border-opacity, 1))}.border-slate-100{--tw-border-opacity:1;border-color:rgb(241 245 249 / var(--tw-border-opacity, 1))}.border-slate-200{--tw-border-opacity:1;border-color:rgb(226 232 240 / var(--tw-border-opacity, 1))}.border-slate-300{--tw-border-opacity:1;border-color:rgb(203 213 225 / var(--tw-border-opacity, 1))}.border-rose-100\/50{border-color:rgb(255 228 230 / 0.5)}.border-transparent{border-color:transparent}.border-l-emerald-400{--tw-border-opacity:1;border-left-color:rgb(52 211 153 / var(--tw-border-opacity, 1))}.bg-blue-500{--tw-bg-opacity:1;background-color:rgb(59 130 246 / var(--tw-bg-opacity, 1))}.bg-blue-600{--tw-bg-opacity:1;background-color:rgb(37 99 235 / var(--tw-bg-opacity, 1))}.bg-emerald-100{--tw-bg-opacity:1;background-color:rgb(209 250 229 / var(--tw-bg-opacity, 1))}.bg-emerald-50{--tw-bg-opacity:1;background-color:rgb(236 253 245 / var(--tw-bg-opacity, 1))}.bg-rose-100{--tw-bg-opacity:1;background-color:rgb(255 228 230 / var(--tw-bg-opacity, 1))}.bg-rose-50{--tw-bg-opacity:1;background-color:rgb(255 241 242 / var(--tw-bg-opacity, 1))}.bg-slate-100{--tw-bg-opacity:1;background-color:rgb(241 245 249 / var(--tw-bg-opacity, 1))}.bg-slate-50{--tw-bg-opacity:1;background-color:rgb(248 250 252 / var(--tw-bg-opacity, 1))}.bg-slate-800{--tw-bg-opacity:1;background-color:rgb(30 41 59 / var(--tw-bg-opacity, 1))}.bg-slate-900\/50{background-color:rgb(15 23 42 / 0.5)}.bg-transparent{background-color:transparent}.bg-white{--tw-bg-opacity:1;background-color:rgb(255 255 255 / var(--tw-bg-opacity, 1))}.bg-rose-50\/50{background-color:rgb(255 241 242 / 0.5)}.p-1{padding:0.25rem}.p-2{padding:0.5rem}.p-3{padding:0.75rem}.p-4{padding:1rem}.p-5{padding:1.25rem}.p-6{padding:1.5rem}.px-2{padding-left:0.5rem;padding-right:0.5rem}.px-3{padding-left:0.75rem;padding-right:0.75rem}.px-4{padding-left:1rem;padding-right:1rem}.px-6{padding-left:1.5rem;padding-right:1.5rem}.py-1{padding-top:0.25rem;padding-bottom:0.25rem}.py-1\.5{padding-top:0.375rem;padding-bottom:0.375rem}.py-2{padding-top:0.5rem;padding-bottom:0.5rem}.py-2\.5{padding-top:0.625rem;padding-bottom:0.625rem}.py-3{padding-top:0.75rem;padding-bottom:0.75rem}.px-1{padding-left:0.25rem;padding-right:0.25rem}.pb-10{padding-bottom:2.5rem}.pb-2{padding-bottom:0.5rem}.pb-3{padding-bottom:0.75rem}.pt-2{padding-top:0.5rem}.pt-3{padding-top:0.75rem}.pl-7{padding-left:1.75rem}.pr-2{padding-right:0.5rem}.text-center{text-align:center}.text-right{text-align:right}.font-mono{font-family:ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace}.text-2xl{font-size:1.5rem;line-height:2rem}.text-3xl{font-size:1.875rem;line-height:2.25rem}.text-\[10px\]{font-size:10px}.text-lg{font-size:1.125rem;line-height:1.75rem}.text-sm{font-size:0.875rem;line-height:1.25rem}.text-xs{font-size:0.75rem;line-height:1rem}.text-\[9px\]{font-size:9px}.text-base{font-size:1rem;line-height:1.5rem}.font-bold{font-weight:700}.font-medium{font-weight:500}.font-semibold{font-weight:600}.uppercase{text-transform:uppercase}.italic{font-style:italic}.tracking-tight{letter-spacing:-0.025em}.tracking-wide{letter-spacing:0.025em}.tracking-wider{letter-spacing:0.05em}.text-blue-600{--tw-text-opacity:1;color:rgb(37 99 235 / var(--tw-text-opacity, 1))}.text-emerald-600{--tw-text-opacity:1;color:rgb(5 150 105 / var(--tw-text-opacity, 1))}.text-emerald-700{--tw-text-opacity:1;color:rgb(4 120 87 / var(--tw-text-opacity, 1))}.text-rose-600{--tw-text-opacity:1;color:rgb(225 29 72 / var(--tw-text-opacity, 1))}.text-rose-700{--tw-text-opacity:1;color:rgb(190 18 60 / var(--tw-text-opacity, 1))}.text-slate-400{--tw-text-opacity:1;color:rgb(148 163 184 / var(--tw-text-opacity, 1))}.text-slate-500{--tw-text-opacity:1;color:rgb(100 116 139 / var(--tw-text-opacity, 1))}.text-slate-600{--tw-text-opacity:1;color:rgb(71 85 105 / var(--tw-text-opacity, 1))}.text-slate-700{--tw-text-opacity:1;color:rgb(51 65 85 / var(--tw-text-opacity, 1))}.text-slate-800{--tw-text-opacity:1;color:rgb(30 41 59 / var(--tw-text-opacity, 1))}.text-white{--tw-text-opacity:1;color:rgb(255 255 255 / var(--tw-text-opacity, 1))}.text-rose-400{--tw-text-opacity:1;color:rgb(251 113 133 / var(--tw-text-opacity, 1))}.text-rose-500{--tw-text-opacity:1;color:rgb(244 63 94 / var(--tw-text-opacity, 1))}.text-slate-300{--tw-text-opacity:1;color:rgb(203 213 225 / var(--tw-text-opacity, 1))}.placeholder-slate-300::placeholder{--tw-placeholder-opacity:1;color:rgb(203 213 225 / var(--tw-placeholder-opacity, 1))}.accent-blue-600{accent-color:#2563eb}.shadow-2xl{--tw-shadow:0 25px 50px -12px rgb(0 0 0 / 0.25);--tw-shadow-colored:0 25px 50px -12px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}.shadow-\[0_0_10px_rgba\(59\2c 130\2c 246\2c 0\.5\)\]{--tw-shadow:0 0 10px rgba(59,130,246,0.5);--tw-shadow-colored:0 0 10px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}.shadow-lg{--tw-shadow:0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);--tw-shadow-colored:0 10px 15px -3px var(--tw-shadow-color), 0 4px 6px -4px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}.shadow-md{--tw-shadow:0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);--tw-shadow-colored:0 4px 6px -1px var(--tw-shadow-color), 0 2px 4px -2px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}.shadow-sm{--tw-shadow:0 1px 2px 0 rgb(0 0 0 / 0.05);--tw-shadow-colored:0 1px 2px 0 var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}.shadow-blue-200{--tw-shadow-color:#bfdbfe;--tw-shadow:var(--tw-shadow-colored)}.outline-none{outline:2px solid transparent;outline-offset:2px}.backdrop-blur-sm{--tw-backdrop-blur:blur(4px);-webkit-backdrop-filter:var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia);backdrop-filter:var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia)}.transition-all{transition-property:all;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms}.transition-colors{transition-property:color, background-color, border-color, fill, stroke, -webkit-text-decoration-color;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, -webkit-text-decoration-color;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms}.hover\:border-slate-200:hover{--tw-border-opacity:1;border-color:rgb(226 232 240 / var(--tw-border-opacity, 1))}.hover\:bg-blue-700:hover{--tw-bg-opacity:1;background-color:rgb(29 78 216 / var(--tw-bg-opacity, 1))}.hover\:bg-emerald-100:hover{--tw-bg-opacity:1;background-color:rgb(209 250 229 / var(--tw-bg-opacity, 1))}.hover\:bg-rose-100:hover{--tw-bg-opacity:1;background-color:rgb(255 228 230 / var(--tw-bg-opacity, 1))}.hover\:bg-slate-200:hover{--tw-bg-opacity:1;background-color:rgb(226 232 240 / var(--tw-bg-opacity, 1))}.hover\:bg-slate-900:hover{--tw-bg-opacity:1;background-color:rgb(15 23 42 / var(--tw-bg-opacity, 1))}.hover\:bg-white:hover{--tw-bg-opacity:1;background-color:rgb(255 255 255 / var(--tw-bg-opacity, 1))}.hover\:text-blue-600:hover{--tw-text-opacity:1;color:rgb(37 99 235 / var(--tw-text-opacity, 1))}.hover\:text-rose-500:hover{--tw-text-opacity:1;color:rgb(244 63 94 / var(--tw-text-opacity, 1))}.hover\:underline:hover{-webkit-text-decoration-line:underline;text-decoration-line:underline}.hover\:shadow:hover{--tw-shadow:0 1px 3px 0 rgb(0 0 0 / 0.1), 0 1px 2px -1px rgb(0 0 0 / 0.1);--tw-shadow-colored:0 1px 3px 0 var(--tw-shadow-color), 0 1px 2px -1px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}.hover\:shadow-md:hover{--tw-shadow:0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);--tw-shadow-colored:0 4px 6px -1px var(--tw-shadow-color), 0 2px 4px -2px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}.focus\:border-blue-400:focus{--tw-border-opacity:1;border-color:rgb(96 165 250 / var(--tw-border-opacity, 1))}.focus\:border-emerald-400:focus{--tw-border-opacity:1;border-color:rgb(52 211 153 / var(--tw-border-opacity, 1))}.focus\:border-emerald-500:focus{--tw-border-opacity:1;border-color:rgb(16 185 129 / var(--tw-border-opacity, 1))}.focus\:ring-2:focus{--tw-ring-offset-shadow:var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow:var(--tw-ring-inset) 0 0 0 calc(2px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow, 0 0 #0000)}.focus\:ring-blue-500:focus{--tw-ring-opacity:1;--tw-ring-color:rgb(59 130 246 / var(--tw-ring-opacity, 1))}@media (min-width: 640px){.sm\:block{display:block}.sm\:p-6{padding:1.5rem}.sm\:pt-0{padding-top:0px}}@media (min-width: 768px){.md\:block{display:block}.md\:grid-cols-3{grid-template-columns:repeat(3, minmax(0, 1fr))}.md\:grid-cols-2{grid-template-columns:repeat(2, minmax(0, 1fr))}}@media (min-width: 1024px){.lg\:grid-cols-2{grid-template-columns:repeat(2, minmax(0, 1fr))}}</style></head>
<body class="h-screen flex flex-col overflow-hidden text-slate-800">

    <!-- Topo / Navega√ß√£o Mensal -->
    <header class="bg-white border-b border-slate-200 px-6 py-3 flex justify-between items-center shadow-sm z-20 shrink-0">
        <div class="flex items-center gap-3">
            <div class="bg-blue-600 text-white p-2 rounded-lg shadow-blue-200 shadow-lg">
                <i class="fas fa-wallet"></i>
            </div>
            <div class="hidden sm:block">
                <h1 class="text-lg font-bold text-slate-800 tracking-tight">Finan√ßas Flex</h1>
                <p class="text-[10px] text-slate-400 font-medium uppercase tracking-wider">Gest√£o Inteligente</p>
            </div>
        </div>

        <!-- Seletor de M√™s -->
        <div class="flex items-center bg-slate-100 rounded-full p-1 border border-slate-200">
            <button onclick="app.changeMonth(-1)" class="w-8 h-8 rounded-full hover:bg-white hover:shadow text-slate-500 transition-all">
                <i class="fas fa-chevron-left"></i>
            </button>
            <div class="px-4 font-semibold text-slate-700 min-w-[140px] text-center text-sm" id="month-display">JANEIRO DE 2026</div>
            <button onclick="app.changeMonth(1)" class="w-8 h-8 rounded-full hover:bg-white hover:shadow text-slate-500 transition-all">
                <i class="fas fa-chevron-right"></i>
            </button>
        </div>

        <div class="flex gap-2">
            <button onclick="app.toggleDataModal()" class="text-slate-500 hover:text-blue-600 px-3 py-2 rounded-lg transition-colors" title="Backup">
                <i class="fas fa-cloud-download-alt fa-lg"></i>
            </button>
            <button onclick="app.downloadApp()" class="bg-slate-800 hover:bg-slate-900 text-white px-4 py-2 rounded-lg text-sm font-medium shadow-md transition-colors">
                <i class="fas fa-save mr-2"></i> Salvar
            </button>
        </div>
    </header>

    <!-- √Årea Principal -->
    <main class="flex-1 overflow-y-auto p-4 sm:p-6 bg-slate-50">
        <div class="max-w-6xl mx-auto space-y-6">
            
            <!-- Cards Resumo -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                <!-- Saldo -->
                <div class="card p-5 border-l-4 border-blue-500 relative overflow-hidden group">
                    <div class="flex justify-between items-start z-10 relative">
                        <div>
                            <div class="text-slate-400 text-xs font-bold uppercase tracking-wider mb-1">Saldo L√≠quido</div>
                            <div class="text-3xl font-bold text-slate-800 tracking-tight" id="display-balance">R$ 4.743,626</div>
                        </div>
                        <span id="health-badge" class="text-[10px] font-bold px-2 py-1 rounded uppercase bg-emerald-100 text-emerald-600">√ìtimo</span>
                    </div>
                    <!-- Meta Progresso -->
                    <div class="mt-4 pt-3 border-t border-slate-100">
                        <div class="flex justify-between text-xs mb-1.5">
                            <span class="font-medium text-slate-500 flex items-center gap-1"><i class="fas fa-flag"></i> Meta do M√™s</span>
                            <span id="goal-text" class="font-bold text-blue-600">100%</span>
                        </div>
                        <div class="h-2 bg-slate-100 rounded-full overflow-hidden">
                            <div id="goal-bar" class="h-full bg-blue-500 progress-bar shadow-[0_0_10px_rgba(59,130,246,0.5)]" style="width: 100%;"></div>
                        </div>
                        <input type="number" id="config-goal" onchange="app.updateGoal(this.value)" class="mt-2 w-full text-xs text-center bg-transparent border-b border-dashed border-slate-300 focus:border-blue-400 outline-none text-slate-400 placeholder-slate-300" placeholder="Definir valor da meta (R$)">
                    </div>
                </div>
                
                <!-- Entradas -->
                <div class="card p-5 border-l-4 border-emerald-500 flex flex-col justify-center">
                    <div class="text-slate-400 text-xs font-bold uppercase tracking-wider mb-1">Entradas (L√≠quido)</div>
                    <div class="text-2xl font-bold text-emerald-600 tracking-tight" id="display-income">R$ 4.743,626</div>
                    <div class="text-xs text-slate-400 mt-1 flex items-center gap-1">
                        <i class="fas fa-calculator"></i> Ap√≥s Impostos
                    </div>
                </div>
                
                <!-- Sa√≠das -->
                <div class="card p-5 border-l-4 border-rose-500 flex flex-col justify-center">
                    <div class="text-slate-400 text-xs font-bold uppercase tracking-wider mb-1">Total Despesas</div>
                    <div class="text-2xl font-bold text-rose-600 tracking-tight" id="display-expense">R$ 0,00</div>
                    <div class="text-xs text-slate-400 mt-1" id="expense-count">0 lan√ßamentos</div>
                </div>
            </div>

            <!-- Gr√°fico (Vis√≠vel apenas em telas maiores) -->
            <div class="card p-6 hidden md:block animate-fade">
                <div class="flex items-center justify-between mb-6">
                    <h3 class="font-bold text-slate-700 text-sm uppercase tracking-wide flex items-center gap-2">
                        <i class="fas fa-chart-pie text-slate-400"></i> Distribui√ß√£o de Gastos
                    </h3>
                </div>
                <div class="flex items-center gap-10">
                    <div class="relative w-32 h-32 shrink-0">
                        <canvas id="expenseChart" width="128" height="128"></canvas>
                    </div>
                    <div id="chart-legend" class="flex-1 grid grid-cols-3 gap-x-8 gap-y-3 text-xs"><span class="text-slate-400 col-span-3 text-center italic">Sem dados</span></div>
                </div>
            </div>

            <!-- Listas -->
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 pb-10">
                
                <!-- Entradas -->
                <div class="space-y-4 animate-fade" style="animation-delay: 0.1s">
                    <div class="flex justify-between items-center pb-2 border-b border-slate-200">
                        <h3 class="font-bold text-slate-700 flex items-center gap-2">
                            <div class="w-6 h-6 rounded bg-emerald-100 text-emerald-600 flex items-center justify-center text-xs"><i class="fas fa-arrow-up"></i></div>
                            Rendas
                        </h3>
                        <button onclick="app.addItem('income')" class="text-xs bg-emerald-50 hover:bg-emerald-100 text-emerald-700 font-semibold px-3 py-1.5 rounded-lg transition-colors border border-emerald-200">
                            + Adicionar
                        </button>
                    </div>
                    <div id="list-incomes" class="space-y-4">
                    <div class="card p-4 border-l-4 border-l-emerald-400 flex flex-col gap-3 group transition-all hover:shadow-md">
                        <div class="flex justify-between items-start">
                            <div class="flex-1">
                                <label class="text-[10px] text-slate-400 uppercase font-bold">Fonte de Renda</label>
                                <input type="text" value="Sal√°rio Exemplo" onchange="app.updateItem('income', 1, 'name', this.value)" class="text-base font-bold text-slate-700 w-full bg-transparent outline-none border-b border-transparent hover:border-slate-200 focus:border-emerald-400">
                            </div>
                            <button onclick="app.deleteItem('income', 1)" class="text-slate-300 hover:text-rose-500 p-1"><i class="fas fa-trash"></i></button>
                        </div>

                        <div class="bg-slate-50 p-3 rounded-lg border border-slate-100 flex flex-wrap gap-4 items-center">
                            <div class="flex-1 min-w-[120px]">
                                <label class="block text-[10px] text-slate-500 font-bold mb-1">SAL√ÅRIO BRUTO</label>
                                <div class="relative">
                                    <span class="absolute left-2 top-1/2 -translate-y-1/2 text-slate-400 text-xs">R$</span>
                                    <input type="number" value="5369.38" onchange="app.updateItem('income', 1, 'value', this.value)" class="w-full pl-7 py-1 bg-white border border-slate-200 rounded text-sm font-bold text-slate-700 outline-none focus:border-emerald-500">
                                </div>
                            </div>
                            <div class="flex flex-col gap-1.5 pt-3 sm:pt-0">
                                <label class="flex items-center gap-2 cursor-pointer text-xs font-medium text-slate-600 select-none">
                                    <input type="checkbox" checked="" onchange="app.updateItem('income', 1, 'tax', this.checked)" class="accent-blue-600">
                                    Descontar INSS/IRRF
                                </label>
                                <label class="flex items-center gap-2 cursor-pointer text-xs font-medium text-slate-600 select-none">
                                    <input type="checkbox" onchange="app.updateItem('income', 1, 'useBonus', this.checked)" class="accent-blue-600">
                                    Aplicar B√¥nus
                                </label>
                            </div>
                        </div>

                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 text-xs ">
                            <div class="space-y-3 border-r border-slate-100 pr-2">
                                

                                
                                <div class="flex justify-between items-center animate-fade">
                                    <span class="text-slate-500">Dependentes (IR)</span>
                                    <input type="number" value="2" onchange="app.updateItem('income', 1, 'dependents', this.value)" class="w-12 text-center bg-white border border-slate-200 rounded outline-none text-slate-700">
                                </div>
                                <div class="flex justify-between items-center animate-fade" title="Ex: Previd√™ncia Privada">
                                    <span class="text-slate-500">Outras Ded. Legais</span>
                                    <input type="number" value="0" onchange="app.updateItem('income', 1, 'deductions', this.value)" class="w-16 text-right bg-white border border-slate-200 rounded outline-none text-slate-700 px-1">
                                </div>
                            </div>

                            <div class="bg-rose-50/50 rounded p-2 border border-rose-100/50 space-y-1">
                                <h6 class="text-[10px] font-bold text-rose-400 uppercase mb-1">Descontos Calculados</h6>
                                
                                <div class="flex justify-between text-slate-600">
                                    <span>INSS (Progressivo)</span>
                                    <span class="font-mono text-rose-600">- R$ 570.53</span>
                                </div>
                                <div class="flex justify-between text-slate-600">
                                    <div class="flex flex-col">
                                        <span>IRRF (C/ Redu√ß√£o)</span>
                                        <span class="text-[9px] text-slate-400">R$ 263.71 Desconto</span>
                                    </div>
                                    <span class="font-mono text-rose-600">- R$ 55.22</span>
                                </div>
                                
                                <button onclick="app.manageExtra('add', 1)" class="text-[10px] text-rose-500 hover:underline mt-1">+ Outro desconto</button>
                            </div>
                        </div>

                        <div class="pt-2 border-t border-slate-100 flex justify-between items-center">
                            <div>
                                <div class="text-[10px] font-bold text-slate-400 uppercase">L√≠quido a Receber</div>
                                
                            </div>
                            <div class="text-lg font-bold text-emerald-600">R$ 4.743,626</div>
                        </div>
                    </div></div>
                </div>

                <!-- Sa√≠das -->
                <div class="space-y-4 animate-fade" style="animation-delay: 0.2s">
                    <div class="flex justify-between items-center pb-2 border-b border-slate-200">
                        <h3 class="font-bold text-slate-700 flex items-center gap-2">
                            <div class="w-6 h-6 rounded bg-rose-100 text-rose-600 flex items-center justify-center text-xs"><i class="fas fa-arrow-down"></i></div>
                            Despesas
                        </h3>
                        <button onclick="app.addItem('expense')" class="text-xs bg-rose-50 hover:bg-rose-100 text-rose-700 font-semibold px-3 py-1.5 rounded-lg transition-colors border border-rose-200">
                            + Adicionar
                        </button>
                    </div>
                    <div id="list-expenses" class="space-y-3"></div>
                </div>
            </div>
        </div>
    </main>

    <!-- Modal Dados -->
    <div id="modal-data" class="fixed inset-0 bg-slate-900/50 backdrop-blur-sm z-50 hidden flex items-center justify-center p-4">
        <div class="bg-white rounded-xl shadow-2xl w-full max-w-lg p-6 space-y-4 animate-fade">
            <div class="flex justify-between items-center border-b border-slate-100 pb-3">
                <h3 class="font-bold text-slate-700">Backup Completo (JSON)</h3>
                <button onclick="app.toggleDataModal()" class="text-slate-400 hover:text-rose-500"><i class="fas fa-times"></i></button>
            </div>
            <p class="text-xs text-slate-500">Este c√≥digo cont√©m os dados de <strong>todos os meses</strong> salvos.</p>
            <textarea id="data-json" class="w-full h-48 border border-slate-200 rounded-lg p-3 text-xs font-mono text-slate-600 resize-none focus:ring-2 focus:ring-blue-500 outline-none"></textarea>
            <div class="flex gap-3 pt-2">
                <button onclick="app.copyData()" class="flex-1 bg-slate-100 text-slate-700 py-2.5 rounded-lg text-sm font-semibold hover:bg-slate-200 transition-colors">Copiar</button>
                <button onclick="app.importData()" class="flex-1 bg-blue-600 text-white py-2.5 rounded-lg text-sm font-semibold hover:bg-blue-700 shadow-lg shadow-blue-200 transition-colors">Restaurar</button>
            </div>
        </div>
    </div>

    <script>
        class FinancasApp {
            constructor() {
                this.db = {
                    currentMonthKey: this.getMonthKey(new Date()),
                    months: {} 
                };
                
                this.monthData = { incomes: [], expenses: [], goal: 0 };
                this.chartColors = ['#3b82f6', '#ef4444', '#10b981', '#f59e0b', '#8b5cf6', '#ec4899', '#6366f1', '#14b8a6'];
                
                // INSS (Tabela Progressiva 2024/2025)
                this.INSS_TABLE = [
                    { limit: 1412.00, rate: 0.075 },
                    { limit: 2666.68, rate: 0.09 },
                    { limit: 4000.03, rate: 0.12 },
                    { limit: 7786.02, rate: 0.14 }
                ];
                
                // IRRF (Faixas para o Passo 1)
                this.IRRF_TABLE = [
                    { limit: 2259.20, rate: 0, deduction: 0 },
                    { limit: 2826.65, rate: 0.075, deduction: 182.16 }, 
                    { limit: 3751.05, rate: 0.15, deduction: 394.16 },
                    { limit: 4664.68, rate: 0.225, deduction: 675.49 },
                    { limit: Infinity, rate: 0.275, deduction: 908.73 }
                ];

                this.DEDUCTION_PER_DEPENDENT = 189.59;
                
                // Nota: O usu√°rio solicitou que o c√°lculo siga estritamente os passos fornecidos (Step 1 + Step 2 Formula)
                // e n√£o a l√≥gica autom√°tica de "Melhor benef√≠cio com desconto simplificado".

                this.load();
            }

            getMonthKey(date) {
                return `${date.getFullYear()}-${String(date.getMonth() + 1).padStart(2, '0')}`;
            }

            formatMonthDisplay(key) {
                const [year, month] = key.split('-');
                const date = new Date(parseInt(year), parseInt(month) - 1, 1);
                return date.toLocaleDateString('pt-BR', { month: 'long', year: 'numeric' });
            }

            changeMonth(offset) {
                const [year, month] = this.db.currentMonthKey.split('-').map(Number);
                const newDate = new Date(year, month - 1 + offset, 1);
                this.db.currentMonthKey = this.getMonthKey(newDate);
                this.saveGlobal();
                this.loadMonthData();
                this.render();
            }

            saveGlobal() {
                this.db.months[this.db.currentMonthKey] = this.monthData;
                localStorage.setItem('financas_flex_pro_v1', JSON.stringify(this.db));
            }

            load() {
                const data = localStorage.getItem('financas_flex_pro_v1');
                if (data) {
                    try {
                        const parsed = JSON.parse(data);
                        if (parsed.incomes) { 
                            this.db.months[this.db.currentMonthKey] = {
                                incomes: parsed.incomes,
                                expenses: parsed.expenses,
                                goal: parsed.config?.savingsGoal || 0
                            };
                        } else {
                            this.db = parsed;
                        }
                    } catch (e) { console.error("Erro load", e); }
                }
                this.loadMonthData();
                this.render();
            }

            loadMonthData() {
                if (!this.db.months[this.db.currentMonthKey]) {
                    this.db.months[this.db.currentMonthKey] = { incomes: [], expenses: [], goal: 0 };
                }
                this.monthData = this.db.months[this.db.currentMonthKey];
                
                // Demo Inicial com o exemplo do usu√°rio para valida√ß√£o
                if (Object.keys(this.db.months).length === 1 && this.monthData.incomes.length === 0 && this.monthData.expenses.length === 0) {
                   this.monthData.incomes.push({ 
                       id: 1, name: 'Sal√°rio Exemplo', value: 5369.38, 
                       tax: true, dependents: 2, bonusPerc: 0, useBonus: false, 
                       deductions: 0, extraDiscounts: [] 
                   });
                   this.monthData.goal = 1500;
                   this.saveGlobal();
                }
            }

            calculateINSS(gross) {
                let tax = 0;
                let previousLimit = 0;
                for (let faixa of this.INSS_TABLE) {
                    if (gross <= previousLimit) break;
                    const rangeMax = faixa.limit;
                    const calculableBase = Math.min(gross, rangeMax) - previousLimit;
                    if (calculableBase > 0) tax += calculableBase * faixa.rate;
                    previousLimit = rangeMax;
                }
                return tax;
            }

            calculateIRRF(gross, inss, dependents, deductionsManual) {
                // SEGUINDO ESTRITAMENTE O ALGORITMO DO USU√ÅRIO
                
                // Passo 1: Base de C√°lculo
                // Base = Bruto - INSS - Dedu√ß√µes Legais (Dependentes + Outras)
                // (Ignorando desconto simplificado autom√°tico para este c√°lculo espec√≠fico)
                const legalDeductions = (dependents * this.DEDUCTION_PER_DEPENDENT) + deductionsManual;
                const baseCalc = Math.max(0, gross - inss - legalDeductions);
                
                // Passo 1.1: C√°lculo Padr√£o na Tabela
                let rate = 0;
                let deductionStandard = 0;
                
                for (let faixa of this.IRRF_TABLE) {
                    if (baseCalc <= faixa.limit) {
                        rate = faixa.rate;
                        deductionStandard = faixa.deduction;
                        break;
                    }
                }
                
                const step1IRRF = Math.max(0, (baseCalc * rate) - deductionStandard);

                // Passo 2: C√°lculo da Redu√ß√£o (F√≥rmula do Usu√°rio)
                // F√≥rmula: R$ 978,62 ‚Äì (0,133145 x R$ Bruto)
                // Limite: Sal√°rio Bruto <= 7350,00
                
                let reduction = 0;
                if (gross <= 7350) {
                    reduction = 978.62 - (0.133145 * gross);
                    if (reduction < 0) reduction = 0;
                }

                // IRRF Final: Passo 1 - Redu√ß√£o do Passo 2
                const finalIRRF = Math.max(0, step1IRRF - reduction);

                return { 
                    value: finalIRRF, 
                    reductionApplied: reduction 
                };
            }

            calculateItemDetails(inc) {
                let gross = inc.value;
                let bonusVal = 0;

                if (inc.useBonus && inc.bonusPerc > 0) {
                    bonusVal = gross * (inc.bonusPerc / 100);
                    gross += bonusVal;
                }

                let inssVal = 0;
                let irrfVal = 0;
                let irrfData = { value: 0, reductionApplied: 0 };

                if (inc.tax) {
                    inssVal = this.calculateINSS(gross);
                    irrfData = this.calculateIRRF(gross, inssVal, inc.dependents || 0, inc.deductions || 0);
                    irrfVal = irrfData.value;
                }

                const totalExtras = (inc.extraDiscounts || []).reduce((s, d) => s + (d.value || 0), 0);
                const liquid = gross - inssVal - irrfVal - totalExtras;

                return { gross, bonusVal, inssVal, irrfVal, irrfData, totalExtras, liquid };
            }

            calculateTotals() {
                let totalLiquid = 0;
                let totalExpense = 0;

                this.monthData.incomes.forEach(i => totalLiquid += this.calculateItemDetails(i).liquid);
                this.monthData.expenses.forEach(e => totalExpense += e.value);

                return { totalLiquid, totalExpense, balance: totalLiquid - totalExpense };
            }

            addItem(type) {
                const id = Date.now();
                if (type === 'income') {
                    this.monthData.incomes.push({
                        id, name: 'Nova Renda', value: 0, 
                        tax: false, dependents: 0,
                        useBonus: false, bonusPerc: 0,
                        deductions: 0, extraDiscounts: []
                    });
                } else {
                    this.monthData.expenses.unshift({ id, name: 'Nova Despesa', value: 0, cat: 'Geral' });
                }
                this.saveGlobal();
                this.render();
            }

            updateGoal(val) {
                this.monthData.goal = parseFloat(val) || 0;
                this.saveGlobal();
                this.render();
            }

            updateItem(type, id, field, val) {
                const list = type === 'income' ? this.monthData.incomes : this.monthData.expenses;
                const item = list.find(i => i.id === id);
                if (!item) return;

                if (['value', 'dependents', 'bonusPerc', 'deductions'].includes(field)) item[field] = parseFloat(val) || 0;
                else if (['tax', 'useBonus'].includes(field)) item[field] = val; // bool
                else item[field] = val;

                this.saveGlobal();
                this.render();
            }

            deleteItem(type, id) {
                if(!confirm("Remover item?")) return;
                if(type === 'income') this.monthData.incomes = this.monthData.incomes.filter(i => i.id !== id);
                else this.monthData.expenses = this.monthData.expenses.filter(i => i.id !== id);
                this.saveGlobal();
                this.render();
            }

            manageExtra(action, incId, idx, field, val) {
                const item = this.monthData.incomes.find(i => i.id === incId);
                if(!item) return;
                if(action === 'add') {
                    if(!item.extraDiscounts) item.extraDiscounts = [];
                    item.extraDiscounts.push({ name: 'Desc. Extra', value: 0 });
                } else if(action === 'remove') {
                    item.extraDiscounts.splice(idx, 1);
                } else if(action === 'update') {
                    if(field === 'value') item.extraDiscounts[idx].value = parseFloat(val) || 0;
                    else item.extraDiscounts[idx].name = val;
                }
                this.saveGlobal();
                this.render();
            }

            getHealth(balance, income) {
                if (income <= 0) return { t: 'S/ Renda', c: 'bg-slate-100 text-slate-400' };
                const r = (balance / income);
                if (balance < 0) return { t: 'Negativo', c: 'bg-rose-100 text-rose-600' };
                if (r < 0.1) return { t: 'Cr√≠tico', c: 'bg-orange-100 text-orange-600' };
                if (r < 0.3) return { t: 'Ok', c: 'bg-blue-100 text-blue-600' };
                return { t: '√ìtimo', c: 'bg-emerald-100 text-emerald-600' };
            }

            drawChart() {
                const canvas = document.getElementById('expenseChart');
                if(!canvas) return;
                const ctx = canvas.getContext('2d');
                const legend = document.getElementById('chart-legend');
                
                const cats = {};
                let total = 0;
                this.monthData.expenses.forEach(e => {
                    const c = e.cat || 'Outros';
                    cats[c] = (cats[c] || 0) + e.value;
                    total += e.value;
                });

                ctx.clearRect(0, 0, canvas.width, canvas.height);
                legend.innerHTML = '';
                
                if (total === 0) {
                    ctx.beginPath(); ctx.arc(64, 64, 50, 0, 2 * Math.PI);
                    ctx.strokeStyle = '#f1f5f9'; ctx.lineWidth = 12; ctx.stroke();
                    legend.innerHTML = '<span class="text-slate-400 col-span-3 text-center italic">Sem dados</span>';
                    return;
                }

                let startAngle = 0;
                const sortedCats = Object.entries(cats).sort((a, b) => b[1] - a[1]);

                sortedCats.forEach(([name, value], index) => {
                    const sliceAngle = (value / total) * 2 * Math.PI;
                    const color = this.chartColors[index % this.chartColors.length];
                    
                    ctx.beginPath();
                    ctx.arc(64, 64, 50, startAngle, startAngle + sliceAngle);
                    ctx.strokeStyle = color; ctx.lineWidth = 12; ctx.stroke();
                    
                    const percent = ((value / total) * 100).toFixed(0);
                    legend.innerHTML += `
                        <div class="flex items-center gap-1.5">
                            <span class="w-2 h-2 rounded-full shrink-0" style="background-color: ${color}"></span>
                            <div class="overflow-hidden">
                                <div class="truncate font-medium text-slate-600" title="${name}">${name}</div>
                                <div class="text-[10px] text-slate-400">${percent}%</div>
                            </div>
                        </div>
                    `;
                    startAngle += sliceAngle;
                });
            }

            render() {
                document.getElementById('month-display').innerText = this.formatMonthDisplay(this.db.currentMonthKey).toUpperCase();

                const { totalLiquid, totalExpense, balance } = this.calculateTotals();
                document.getElementById('display-income').innerText = `R$ ${totalLiquid.toLocaleString('pt-BR', {minimumFractionDigits: 2})}`;
                document.getElementById('display-expense').innerText = `R$ ${totalExpense.toLocaleString('pt-BR', {minimumFractionDigits: 2})}`;
                document.getElementById('display-balance').innerText = `R$ ${balance.toLocaleString('pt-BR', {minimumFractionDigits: 2})}`;
                document.getElementById('expense-count').innerText = `${this.monthData.expenses.length} lan√ßamentos`;

                const h = this.getHealth(balance, totalLiquid);
                const badge = document.getElementById('health-badge');
                badge.className = `text-[10px] font-bold px-2 py-1 rounded uppercase ${h.c}`;
                badge.innerText = h.t;

                const goal = this.monthData.goal || 1;
                document.getElementById('config-goal').value = this.monthData.goal || '';
                const p = Math.min(100, Math.max(0, (balance / goal) * 100));
                document.getElementById('goal-bar').style.width = `${p}%`;
                document.getElementById('goal-text').innerText = `${p.toFixed(0)}%`;

                // Render Chart
                if(this.drawChart) this.drawChart();

                const incContainer = document.getElementById('list-incomes');
                incContainer.innerHTML = this.monthData.incomes.map(inc => {
                    const d = this.calculateItemDetails(inc);
                    
                    const extrasHTML = (inc.extraDiscounts || []).map((ex, idx) => `
                        <div class="flex items-center gap-2 mb-1 animate-fade">
                            <input class="bg-transparent border-b border-rose-100 text-xs w-full text-rose-800 placeholder-rose-300 focus:border-rose-400 outline-none" 
                                placeholder="Nome" value="${ex.name}" onchange="app.manageExtra('update', ${inc.id}, ${idx}, 'name', this.value)">
                            <span class="text-rose-400 text-xs">R$</span>
                            <input type="number" class="bg-transparent border-b border-rose-100 text-xs w-16 text-right font-medium text-rose-600 outline-none" 
                                value="${ex.value}" onchange="app.manageExtra('update', ${inc.id}, ${idx}, 'value', this.value)">
                            <button onclick="app.manageExtra('remove', ${inc.id}, ${idx})" class="text-rose-300 hover:text-rose-500"><i class="fas fa-times"></i></button>
                        </div>
                    `).join('');

                    return `
                    <div class="card p-4 border-l-4 border-l-emerald-400 flex flex-col gap-3 group transition-all hover:shadow-md">
                        <div class="flex justify-between items-start">
                            <div class="flex-1">
                                <label class="text-[10px] text-slate-400 uppercase font-bold">Fonte de Renda</label>
                                <input type="text" value="${inc.name}" onchange="app.updateItem('income', ${inc.id}, 'name', this.value)" 
                                    class="text-base font-bold text-slate-700 w-full bg-transparent outline-none border-b border-transparent hover:border-slate-200 focus:border-emerald-400">
                            </div>
                            <button onclick="app.deleteItem('income', ${inc.id})" class="text-slate-300 hover:text-rose-500 p-1"><i class="fas fa-trash"></i></button>
                        </div>

                        <div class="bg-slate-50 p-3 rounded-lg border border-slate-100 flex flex-wrap gap-4 items-center">
                            <div class="flex-1 min-w-[120px]">
                                <label class="block text-[10px] text-slate-500 font-bold mb-1">SAL√ÅRIO BRUTO</label>
                                <div class="relative">
                                    <span class="absolute left-2 top-1/2 -translate-y-1/2 text-slate-400 text-xs">R$</span>
                                    <input type="number" value="${inc.value}" onchange="app.updateItem('income', ${inc.id}, 'value', this.value)" 
                                        class="w-full pl-7 py-1 bg-white border border-slate-200 rounded text-sm font-bold text-slate-700 outline-none focus:border-emerald-500">
                                </div>
                            </div>
                            <div class="flex flex-col gap-1.5 pt-3 sm:pt-0">
                                <label class="flex items-center gap-2 cursor-pointer text-xs font-medium text-slate-600 select-none">
                                    <input type="checkbox" ${inc.tax ? 'checked' : ''} onchange="app.updateItem('income', ${inc.id}, 'tax', this.checked)" class="accent-blue-600">
                                    Descontar INSS/IRRF
                                </label>
                                <label class="flex items-center gap-2 cursor-pointer text-xs font-medium text-slate-600 select-none">
                                    <input type="checkbox" ${inc.useBonus ? 'checked' : ''} onchange="app.updateItem('income', ${inc.id}, 'useBonus', this.checked)" class="accent-blue-600">
                                    Aplicar B√¥nus
                                </label>
                            </div>
                        </div>

                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 text-xs ${!inc.tax && !inc.useBonus ? 'hidden' : ''}">
                            <div class="space-y-3 border-r border-slate-100 pr-2">
                                ${inc.useBonus ? `
                                <div class="flex justify-between items-center animate-fade">
                                    <span class="text-slate-500">% do B√¥nus</span>
                                    <div class="flex items-center bg-white border border-slate-200 rounded px-1">
                                        <input type="number" value="${inc.bonusPerc}" onchange="app.updateItem('income', ${inc.id}, 'bonusPerc', this.value)" class="w-10 text-right outline-none text-slate-700">
                                        <span class="text-slate-400 ml-1">%</span>
                                    </div>
                                </div>` : ''}

                                ${inc.tax ? `
                                <div class="flex justify-between items-center animate-fade">
                                    <span class="text-slate-500">Dependentes (IR)</span>
                                    <input type="number" value="${inc.dependents}" onchange="app.updateItem('income', ${inc.id}, 'dependents', this.value)" 
                                        class="w-12 text-center bg-white border border-slate-200 rounded outline-none text-slate-700">
                                </div>
                                <div class="flex justify-between items-center animate-fade" title="Ex: Previd√™ncia Privada">
                                    <span class="text-slate-500">Outras Ded. Legais</span>
                                    <input type="number" value="${inc.deductions}" onchange="app.updateItem('income', ${inc.id}, 'deductions', this.value)" 
                                        class="w-16 text-right bg-white border border-slate-200 rounded outline-none text-slate-700 px-1">
                                </div>` : ''}
                            </div>

                            <div class="bg-rose-50/50 rounded p-2 border border-rose-100/50 space-y-1">
                                <h6 class="text-[10px] font-bold text-rose-400 uppercase mb-1">Descontos Calculados</h6>
                                ${inc.tax ? `
                                <div class="flex justify-between text-slate-600">
                                    <span>INSS (Progressivo)</span>
                                    <span class="font-mono text-rose-600">- R$ ${d.inssVal.toFixed(2)}</span>
                                </div>
                                <div class="flex justify-between text-slate-600">
                                    <div class="flex flex-col">
                                        <span>IRRF ${d.irrfData.reductionApplied > 0 ? '(C/ Redu√ß√£o)' : ''}</span>
                                        ${d.irrfData.reductionApplied > 0 ? `<span class="text-[9px] text-slate-400">R$ ${d.irrfData.reductionApplied.toFixed(2)} Desconto</span>` : ''}
                                    </div>
                                    <span class="font-mono text-rose-600">- R$ ${d.irrfVal.toFixed(2)}</span>
                                </div>` : ''}
                                ${extrasHTML}
                                <button onclick="app.manageExtra('add', ${inc.id})" class="text-[10px] text-rose-500 hover:underline mt-1">+ Outro desconto</button>
                            </div>
                        </div>

                        <div class="pt-2 border-t border-slate-100 flex justify-between items-center">
                            <div>
                                <div class="text-[10px] font-bold text-slate-400 uppercase">L√≠quido a Receber</div>
                                ${d.bonusVal > 0 ? `<div class="text-[10px] text-emerald-500">+ R$ ${d.bonusVal.toFixed(2)} b√¥nus</div>` : ''}
                            </div>
                            <div class="text-lg font-bold text-emerald-600">R$ ${d.liquid.toLocaleString('pt-BR', {minimumFractionDigits: 2})}</div>
                        </div>
                    </div>`;
                }).join('');

                const expContainer = document.getElementById('list-expenses');
                expContainer.innerHTML = this.monthData.expenses.map(exp => `
                    <div class="bg-white border-l-4 border-l-rose-400 p-3 rounded-lg shadow-sm flex flex-col gap-1 relative group hover:shadow-md transition-all">
                        <div class="flex justify-between">
                            <input type="text" value="${exp.name}" onchange="app.updateItem('expense', ${exp.id}, 'name', this.value)" 
                                class="font-bold text-slate-700 bg-transparent outline-none w-full placeholder-slate-300">
                            <button onclick="app.deleteItem('expense', ${exp.id})" class="text-slate-200 hover:text-rose-500"><i class="fas fa-times"></i></button>
                        </div>
                        <div class="flex justify-between items-center mt-1">
                            <input type="text" value="${exp.cat}" onchange="app.updateItem('expense', ${exp.id}, 'cat', this.value)" 
                                class="text-xs text-slate-400 bg-slate-50 px-2 py-0.5 rounded outline-none focus:bg-white focus:ring-1 focus:ring-blue-200" placeholder="Categoria">
                            <div class="relative">
                                <span class="absolute left-2 top-1/2 -translate-y-1/2 text-slate-400 text-xs">R$</span>
                                <input type="number" value="${exp.value}" onchange="app.updateItem('expense', ${exp.id}, 'value', this.value)" 
                                    class="w-24 pl-6 py-1 bg-slate-50 rounded text-right text-sm font-bold text-rose-600 outline-none focus:bg-white focus:ring-1 focus:ring-rose-200">
                            </div>
                        </div>
                    </div>
                `).join('');
            }

            toggleDataModal() {
                const m = document.getElementById('modal-data');
                m.classList.toggle('hidden');
                if(!m.classList.contains('hidden')) document.getElementById('data-json').value = JSON.stringify(this.db, null, 2);
            }
            copyData() {
                document.getElementById('data-json').select();
                document.execCommand('copy');
                alert('Dados copiados!');
            }
            importData() {
                try {
                    this.db = JSON.parse(document.getElementById('data-json').value);
                    if(!this.db.months || !this.db.currentMonthKey) throw new Error();
                    this.saveGlobal();
                    this.loadMonthData();
                    this.render();
                    this.toggleDataModal();
                    alert('Dados restaurados!');
                } catch(e) { alert('JSON Inv√°lido ou estrutura antiga incompat√≠vel.'); }
            }
            downloadApp() {
                const blob = new Blob([document.documentElement.outerHTML], {type: 'text/html'});
                const a = document.createElement('a');
                a.href = URL.createObjectURL(blob);
                a.download = `FinancasFlex_Pro.html`;
                a.click();
            }
        }

        const app = new FinancasApp();
    </script>

</body></html>